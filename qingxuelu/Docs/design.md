# 📱 学习目标管理系统设计文档

## 一、产品定位

* 面向对象：具备自我管理能力的高中生、大学生、研究生, 或者是管理子女学习计划的家长。
* 产品目标：帮助学生 **设定学习目标 → 制定计划 → 执行任务 → 数据复盘**，形成完整学习闭环。
* 使用场景：期末备考、考研、语言自学、技能提升。

---

## 二、核心功能模块

1. **目标管理（Goals）**

   * 全局目标（如“期末总分提高到年级前 20”）。
   * 专题目标（如“英语六级 ≥ 500 分”、“西班牙语 A2 水平”）。
   * 每个目标包含 2–4 个关键结果（KR）。
   * 提供目标模板库，用户可快速套用。

2. **计划管理（Plan）**

   * 按周/月拆解目标，设定里程碑。
   * 计划可关联资源（教材、题库、课程链接）。
   * 周视图时间线，直观展示任务分布。

3. **任务执行（Today）**

   * 每日待办清单（按优先级/DDL排序）。
   * 番茄钟 + 打卡机制。
   * 快捷添加任务（自然语言识别）。
   * 顶部进度环显示当日 KR 完成度。

4. **数据复盘（Stats）**

   * 周/月学习仪表盘：学习时长、完成率、分科投入、KR 进度。
   * 复盘卡片：收获/问题/改进计划。
   * 历史复盘归档，可导出报告。

5. **扩展功能**（MVP 可延后）

   * 习惯追踪（如“每日晨读 20 分钟”）。
   * 积分/徽章激励机制。
   * 资源库（管理书籍、课程、资料）。
   * 云同步（iCloud/跨平台）。

---

## 三、页面架构

* **Today / 今日**：今日任务清单 + 番茄钟 + 快捷打卡。
* **Goals / 目标**：目标卡片 + KR 进度；目标详情页展示里程碑与计划。
* **Plan / 计划**：周时间线视图；计划详情含里程碑、资源、任务生成。
* **Stats / 复盘**：学习时长趋势、任务完成率、KR 达成度；周复盘卡片。
* **More / 设置**：习惯管理、提醒、主题、数据备份。

MVP 推荐：**Today / Goals / Plan / Stats** 四个 Tab，保持简洁。

---

## 四、设计逻辑

* **Goals → Plan → Today → Stats → Goals** 循环闭环。
* 用户核心问题：

  * 今天要做什么？（Today）
  * 为什么要做？（Goals）
  * 怎么分配？（Plan）
  * 做得如何？（Stats）

---

## 五、用户旅程案例

### 🎓 高一学生小林（期末备考）

* Goals：设“数学 ≥90”目标，KR=模拟卷、几何题正确率、错题订正。
* Plan：12 周计划，每天几何题，每两周模拟卷。
* Today：每日待办 → 背单词、做几何题、复习错题。
* Stats：周完成率 80%，复盘发现做题速度慢 → 调整计划。

### 👨‍🎓 大二学生小陈（自学西语）

* Goals：设“西班牙语 A2”目标，KR=1500 单词、80 单元、20 小时口语。
* Plan：16 周计划，每周 100 词+5 单元+语伴 1 次。
* Today：每日清单 → 背单词、Duolingo、听力练习。
* Stats：周学习时长 7h，口语不足 → 增加自录练习。

### 🧑‍🎓 研究生小王（考研）

* Goals：设“考研总分 ≥380”目标，KR=数学二≥130、英语一≥70、政治≥65、专业课≥115。
* Plan：半年计划，数学卷、英语单词、政治题库、专业课精读。
* Today：每日任务量大 → 多科并行执行。
* Stats：周学习时长 38h，英语单词落后 → 调整每日单词目标。

---

## 六、多用户支持设计变更

### 6.1 产品定位扩展

* **目标用户**：具备自我管理能力的高中生、大学生、研究生，**或者是管理子女学习计划的家长**。
* **使用场景**：期末备考、考研、语言自学、技能提升，**以及父母管理多个孩子的学习**。

### 6.2 数据模型调整

#### 6.2.1 用户管理模型
```swift
struct User: Identifiable, Codable {
    let id = UUID()
    var name: String
    var grade: String
    var avatar: String?
    var isParent: Bool = false  // 区分父母和孩子
    var createdAt: Date
    var updatedAt: Date
}
```

#### 6.2.2 现有模型扩展
```swift
// 为所有核心模型添加用户关联
struct LearningGoal {
    let id = UUID()
    var userId: UUID        // 新增：关联用户
    // 其他字段保持不变
}

struct LearningTask {
    let id = UUID()
    var userId: UUID        // 新增：关联用户
    // 其他字段保持不变
}

struct LearningRecord {
    let id = UUID()
    var userId: UUID        // 新增：关联用户
    // 其他字段保持不变
}
```

### 6.3 页面功能调整（第一版简化方案）

#### 6.3.1 Goals页面
* **目标标题区分**：通过目标标题明确标识用户（如"小明的数学提升计划"、"小红的英语学习目标"）
* **目标卡片**：保持单用户界面，通过标题和描述区分不同用户的目标
* **目标模板**：提供通用模板，用户可根据需要自定义标题

#### 6.3.2 Plan页面
* **计划详情**：保持单用户计划视图，通过计划标题关联到具体用户
* **计划生成**：根据目标信息自动生成个性化计划
* **时间线视图**：清晰展示单个计划的执行时间线

#### 6.3.3 Today页面
* **任务列表**：显示当前选中目标的相关任务
* **进度环**：显示当前目标的KR完成度
* **任务管理**：专注于任务执行和打卡功能

#### 6.3.4 Stats页面
* **数据分析**：基于目标维度的学习数据分析
* **复盘功能**：针对具体目标的复盘记录
* **导出功能**：支持导出单个目标的完成报告

### 6.4 核心功能增强（第一版简化方案）

#### 6.4.1 目标管理增强
* **目标标题规范**：建议使用"用户+目标类型"的命名方式（如"小明的数学提升计划"）
* **目标分类**：支持按用户、科目、优先级等维度分类
* **目标模板**：提供常用目标模板，降低创建门槛

#### 6.4.2 数据聚合分析
* **目标维度统计**：按目标统计学习时长、完成率等
* **目标对比**：不同目标的进度和效果对比
* **趋势分析**：单个目标的学习趋势分析

#### 6.4.3 简化监督功能
* **目标状态概览**：在Goals页面显示所有目标的状态
* **进度提醒**：目标滞后或任务逾期提醒
* **完成庆祝**：目标完成时的成就展示

### 6.5 技术实现要点（第一版简化方案）

#### 6.5.1 数据模型调整
```swift
// 保持现有模型，添加userId字段用于未来扩展
struct LearningGoal {
    let id = UUID()
    var userId: UUID = UUID()  // 默认值，第一版暂不使用
    var title: String          // 通过标题区分用户
    // 其他字段保持不变
}
```

#### 6.5.2 目标标题规范
```swift
// 建议的目标标题格式
let goalTitles = [
    "小明的数学提升计划",
    "小红的英语学习目标", 
    "小王的考研复习计划",
    "小张的编程技能提升"
]
```

#### 6.5.3 数据迁移
```swift
// 第一版数据迁移（保持向后兼容）
func migrateToV1() {
    // 为现有数据添加默认userId
    // 保持数据完整性
    // 不影响现有功能
}
```

### 6.6 第一版MVP功能范围

#### 6.6.1 核心功能
* **目标管理**：创建、编辑、删除学习目标
* **计划制定**：基于目标自动生成学习计划
* **任务执行**：今日任务清单、番茄钟、打卡
* **数据复盘**：学习统计、复盘记录、报告导出

#### 6.6.2 多用户支持
* **目标标题区分**：通过标题明确标识不同用户
* **数据关联**：为未来多用户功能预留userId字段
* **模板支持**：提供常用目标模板

#### 6.6.3 暂不包含功能
* **用户切换器**：避免界面复杂化
* **多用户对比**：专注于单目标深度分析
* **复杂权限管理**：保持简单易用

---

## 七、结论

* **设计清晰简洁**：4 大页面保证闭环，第一版专注于核心功能完整性。
* **功能覆盖全面**：目标、计划、任务、复盘 → 满足自我管理型学生和家长管理需求。
* **技术实现简单**：通过目标标题区分用户，为未来扩展预留技术基础。
* **第一版MVP策略**：

  * 提供模板降低使用门槛。
  * 通过数据可视化和激励机制提升粘性。
  * 保持每日使用流程简短高效。
  * **通过目标标题区分用户，避免界面复杂化**。
  * **为未来多用户功能预留技术基础**。
